
<html><head><title>AceChase:Configuration</title>

<meta charset="utf-8">
<meta property="og:url"                content="https://aceholecousins.github.io/acechase/" />
<meta property="og:type"               content="product" />
<meta property="og:title"              content="AceChase" />
<meta property="og:description"        content="A free Massive Multiplayer Couch Vehicular Combat Game by AceholeCousins" />
<meta property="og:image"              content="https://raw.githubusercontent.com/aceholecousins/acechase/master/media/images/banner.jpg" />

<link rel="icon" href="media/images/hbfav.ico" type="image/vnd.microsoft.icon">
<style type="text/css">
.std {
	box-shadow: 1px 1px 4px #404850;
	margin: 2px;
	border-style:none;
	border-width:2px;
	border-radius:3px;
	border-color:#808080;
	font-size:13pt;
	font-family:sans-serif;
	background-color:#f0f8ff;
}
.campaign {
	box-shadow: 1px 1px 4px #404850;
	margin: 2px;
	border-style:none;
	border-width:2px;
	border-radius:3px;
	border-color:#cccccc;
	font-size:13pt;
	font-family:sans-serif;
	background-color:white;
	width:540px;
	padding:7px;
	cursor:pointer;
}
.campaign:hover{
	background-color:skyblue;
}
body { 
  background: url(media/images/vs.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
	font-size:13pt;
	font-family:sans-serif;
}
button{
	overflow: hidden;
}
input[type=checkbox]
{
  -ms-transform: scale(2); /* IE */
  -moz-transform: scale(2); /* FF */
  -webkit-transform: scale(2); /* Safari and Chrome */
  -o-transform: scale(2); /* Opera */
}
.optionline{
	height:32px;
}
a{
	text-decoration:none;
}
</style>

</head><body>

<script src="medals.js"></script>
<script>

var CFGVERSION = 1; // version of the config string pattern
var SINGLEMULTI = 0; // 1 for single, 2 for multiplayer
var MAP0 = ""; // selected singleplayer level
var GAME0 = ""; // selected singleplayer game mode

/////////////////////////
// HTML for one player //
/////////////////////////

var playerDisplayTemplate = `
<table id="table_$" class="std" style="padding:7px; background-color:white; border-color:#cccccc; height:210px; width:540px">
 <tr>
  <td id="vehicle_$" align="center">
   <div id="picbg_$" style="width:160px; height:120px; background-color:#ff0000">
    <img src="media/images/darken.png" style="width:100%; height:100%;">
    <img src="media/images/lighten.png" style="position:relative; top:-100%; width:100%; height:100%; zIndex:4">
   </div>
   <input id="name_$" class="std" style="width:160px; text-align:center" value=""><br>
   <select id="color_$" class="std" style="width:160px"
        onchange="get('picbg_'+idx(this)).style.backgroundColor=this.value">
   </select><br>
  </td>
  <td id="ctltype_$" align="center">
   <img id="ctlgp_$" class="std" src="media/images/gamepad.png" style="width:60px;"
	onclick="ctlSelect(idx(this), 'gp')">
   <img id="ctlkb_$" class="std" src="media/images/keyboard.png" style="width:60px;"
	onclick="ctlSelect(idx(this), 'kb')"><br>
   <img id="ctlms_$" class="std" src="media/images/mouse.png" style="width:60px;"
	onclick="ctlSelect(idx(this), 'ms')">
   <img id="ctlmd_$" class="std" src="media/images/mobile.png" style="width:60px;"
	onclick="ctlSelect(idx(this), 'md')"><br><br>
   <button id="remove_$" class="std" style="background-color:#ff9977"
        onclick="get('mpdisparea').removeChild(get('playerbox_' + idx(this)))">Remove Player
   </button>
  </td>
  <td id="ctloptions_$" align="right" style="width:200px;">
   <div id="gpoptions_$">
	Pad #: <select id="gpidx_$" class="std" style="width:100px;"></select><br>
	Control: <select id="gprelabs_$" class="std" style="width:100px;">
	 <option data-code="rel">Relative</option>
	 <option data-code="abs">Absolute</option>
	</select><br>
	Left/Right: <select id="gplr_$" class="std" style="width:100px;"></select><br>
	Up/Down: <select id="gpud_$" class="std" style="width:100px;"></select><br>
	Thrust: <select id="gpthrust_$" class="std" style="width:100px;"></select><br>
	Fire: <select id="gpfire_$" class="std" style="width:100px;"></select><br>
	<div style="display:none">Special: <select id="gpspcl_$" class="std" style="width:100px;"></select></div>
   </div>
   <div id="kboptions_$">
	Control: <select id="kbrelabs_$" class="std" style="width:100px;">
	 <option data-code="rel">Relative</option>
	 <option data-code="abs">Absolute</option>
	</select><br>
	Left/Right: <button id="kbl_$" class="std" style="width:48px;"
		onclick="assignKey(this)">&nbsp
		</button><button id="kbr_$" class="std" style="width:48px;"
		onclick="assignKey(this)">&nbsp</button><br>
	Up/Down: <button id="kbu_$" class="std" style="width:48px;"
		onclick="assignKey(this)">&nbsp
		</button><button id="kbd_$" class="std" style="width:48px;"
		onclick="assignKey(this)">&nbsp</button><br>
	Thrust: <button id="kbthrust_$" class="std" style="width:100px;"
		onclick="assignKey(this)">&nbsp</button><br>
	Fire: <button id="kbfire_$" class="std" style="width:100px;"
		onclick="assignKey(this)">&nbsp</button><br>
	<div style="display:none">Special: <button id="kbspcl_$" class="std" style="width:100px;"
		onclick="assignKey(this)">&nbsp</button></div>
   </div>
   <div id="msoptions_$">
	Control: <select id="msrelabs_$" class="std" style="width:100px;">
	 <option data-code="rel">Relative</option>
	 <option data-code="abs">Absolute</option>
	</select><br>
	Thrust/Fire: <select id="msthrustfire_$" class="std" style="width:100px;">
	 <option data-code="rl">R/L</option>
	 <option data-code="lr">L/R</option>
	</select><br>
	<div style="display:none">Special: <select id="msspcl_$" class="std" style="width:100px;">
	 <option data-code="lr">L+R simult.</option>
	 <option data-code="wp">Wheel press</option>
	 <option data-code="ws">Wheel scroll</option>
	</select><br></div>
   </div>
    <div id="mdoptions_$">        
   </div>
  </td>
 </tr>
</table>
`;


////////////////
// add player //
////////////////

var mplayerIndex = 1; // index 0 is for single player

function addPlayer(multiplayer){
	var playerIndex;

	if(multiplayer){playerIndex = mplayerIndex;}
	else{playerIndex = 0;}

	var p = make("p");
	p.id = "playerbox_" + playerIndex;

	if(multiplayer){
		get("mpdisparea").insertBefore(p, get("mpdisparea").childNodes[0]);
	}
	else{
		get("spdisparea").appendChild(p);
	}

	var html = playerDisplayTemplate.replaceAll("$", playerIndex);
	p.innerHTML = html;

	for(var i=0; i<colors.length; i++){
		opt = make("option");
		opt.appendChild(txt(colors[i]));
		opt.style.backgroundColor = colors[i];
		get("color_" + playerIndex).appendChild(opt);
	}
	var c = get("color_" + playerIndex);
	c.selectedIndex = randint(colors.length);
	get("picbg_" + playerIndex).style.backgroundColor = c.value;
	get("name_" + playerIndex).value = names[randint(names.length)];

	for(var i=1; i<=127; i++){
		opt = make("option");
		opt.appendChild(txt(i));
		get("gpidx_" + playerIndex).appendChild(opt);
	}
	fillOptions(get("gplr_" + playerIndex), axespm, axcode);
	fillOptions(get("gpud_" + playerIndex), axespm, axcode);
	fillOptions(get("gpthrust_" + playerIndex), axeshalf.concat(buttons), axcode.concat(butcode));
	fillOptions(get("gpfire_" + playerIndex), buttons, butcode);
	fillOptions(get("gpspcl_" + playerIndex), buttons, butcode);

	ctlSelect(playerIndex, "kb");

	get("gplr_" + playerIndex).selectedIndex = 0;
	get("gpud_" + playerIndex).selectedIndex = 3;
	get("gpthrust_" + playerIndex).selectedIndex = 19;
	get("gpfire_" + playerIndex).selectedIndex = 0;
	get("gpspcl_" + playerIndex).selectedIndex = 2;

	get("kbl_" + playerIndex).dataset.code = 65;
	get("kbl_" + playerIndex).innerHTML = keyNames[65];
	get("kbr_" + playerIndex).dataset.code = 68;
	get("kbr_" + playerIndex).innerHTML = keyNames[68];	
	get("kbu_" + playerIndex).dataset.code = 69;
	get("kbu_" + playerIndex).innerHTML = keyNames[69];
	get("kbd_" + playerIndex).dataset.code = 83;
	get("kbd_" + playerIndex).innerHTML = keyNames[83];
	get("kbthrust_" + playerIndex).dataset.code = 87;
	get("kbthrust_" + playerIndex).innerHTML = keyNames[87];
	get("kbfire_" + playerIndex).dataset.code = 32;
	get("kbfire_" + playerIndex).innerHTML = keyNames[32];
	get("kbspcl_" + playerIndex).dataset.code = 17;
	get("kbspcl_" + playerIndex).innerHTML = keyNames[17];

	if(multiplayer){mplayerIndex++;}
	if(!multiplayer){get("remove_" + playerIndex).style.display = "none";}

	return playerIndex;
}

//////////////////////
// helper functions //
//////////////////////

function get(id){return document.getElementById(id);}
function make(tag){return document.createElement(tag);}
function txt(str){return document.createTextNode(str);}
String.prototype.replaceAll = function(search, replacement){var target = this; return target.split(search).join(replacement);};
function idx(self){return self.id.split("_")[1];} // return index of an html element
function randint(maximum){return Math.floor(Math.random()*maximum);}
function pad(num, size){var s = num+""; while (s.length < size){s = "0" + s;} return s;} // 0 padding for strings

function fillOptions(select, options, code){
	for(var i=0; i<options.length; i++){
		opt = make("option");
		opt.appendChild(txt(options[i]));
		opt.dataset.code = code[i];
		select.appendChild(opt);
	}
}

function ctlSelect(index, element){ // takes the player index and "gp/ms/kb/md"
	get("gpoptions_" + index).style.display = "none";
	get("msoptions_" + index).style.display = "none";
	get("kboptions_" + index).style.display = "none";
        get("mdoptions_" + index).style.display = "none";
	get(element + "options_" + index).style.display = "inline";
	
	get("ctlgp_" + index).style.backgroundColor = "#f0f8ff";
	get("ctlms_" + index).style.backgroundColor = "#f0f8ff";
	get("ctlkb_" + index).style.backgroundColor = "#f0f8ff";
        get("ctlmd_" + index).style.backgroundColor = "#f0f8ff";
	get("ctl" + element + "_" + index).style.backgroundColor = "skyblue";

	get("ctltype_" + index).dataset.selected = element;
}

function spmpSelect(spmp){ // sp for singleplayer, mp for multiplayer
	if(spmp == "sp"){
		get("singleplayercfg").style.display = "inline";
		get("sp").style.backgroundColor = "skyblue";
		get("multiplayercfg").style.display = "none";
		get("mp").style.backgroundColor = "#f0f8ff";
		SINGLEMULTI = 1;	
	}
	else if(spmp == "mp"){
		get("singleplayercfg").style.display = "none";
		get("sp").style.backgroundColor = "#f0f8ff";
		get("multiplayercfg").style.display = "inline";
		get("mp").style.backgroundColor = "skyblue";
		SINGLEMULTI = 2;
	}
}

var assignKeyToButton='';
function assignKey(button){
	assignKeyToButton = button;
	button.style.backgroundColor = "yellow";
}
document.body.onkeydown = function(e){
	if(assignKeyToButton != ''){
		e.preventDefault();
		assignKeyToButton.innerHTML = keyNames[e.keyCode] || "k" + e.keyCode;
		assignKeyToButton.dataset.code = e.keyCode;
		assignKeyToButton.style.backgroundColor = "#f0f8ff";
		assignKeyToButton='';
	}
}
function selectItem(select, item){ // selects a string (text or data-code) in a select dropdown
	for(var i=0; i<select.options.length; i++){
		if(select.options[i].text == item || select.options[i].dataset.code == item){
			select.selectedIndex = i;
			return;
		}
	}
}
function getSelectedCode(select){ // returns the data-code of the selected option
	return select.options[select.selectedIndex].dataset.code;
}

function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+ d.toUTCString();
    var cookie = cname + "=" + cvalue.replaceAll(";", "|") + ";" + expires + ";path=/";
    document.cookie = cookie;
    console.log("Cookie written: " + cookie);
    console.log("Verify: " + document.cookie);
}

function getCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for(var i = 0; i <ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length).replaceAll("|", ";");
        }
    }
    return "";
}

function flipOptions(){
	if(get("mpoptions").style.display == "block"){
		get("mpoptions").style.display = "none";
	}
	else{
		get("mpoptions").style.display = "block";
	}
}

function defaultOptions(){

	get("time").value = 120;
	get("hp").value = 10;
	get("shld").value = 6;
	get("shldreg").value = 1;
	get("ammo").value = 30;
	get("ammoreg").value = 10;
	get("vol").value = 40;
	get("debug").value = 0;

}

function startgame(){

	setCookie('hbcfg', config2string(true), 3650);

	var urltail = "#" + config2string(false);

	var url = window.location.href.replace("index.html", "");
	while(url.slice(-1) == "/"){url = url.substring(0, url.length-1);}

	url = url + "/game.html" + urltail;
	
	window.location.href = url;
	
}

////////////////////
// store and load //
////////////////////

function config2string(complete){ // incomplete only contains stuff necessary for starting the game
	var result = 'hbcfgv:' + CFGVERSION + ';';

	if(SINGLEMULTI == 2 || complete){
		result += 'time:' + get('time').value + ';';
		result += 'hp:' + get('hp').value + ';';
		result += 'shld:' + get('shld').value + ';';
		result += 'shldreg:' + get('shldreg').value + ';';
		result += 'ammo:' + get('ammo').value + ';';
		result += 'ammoreg:' + get('ammoreg').value + ';';
		result += 'vol:' + get('vol').value + ';';
		result += 'bump:' + get('bump').checked * 1 + ';';
		result += 'h2o:' + get('h2o').checked * 1 + ';';
		result += 'debug:' + get('debug').value + ';';
		result += 'map:' + get('map').value + ';';
		result += 'game:D;'; // multiplayer only supports death match so far
	}

	if(SINGLEMULTI == 1 || complete){
		result += 'vol0:' + get('vol0').value + ';';
		result += 'bump0:' + get('bump0').checked * 1 + ';';
		result += 'h2o0:' + get('h2o0').checked * 1 + ';';
		result += 'debug0:' + get('debug0').value + ';';
		result += 'map0:' + MAP0 + ';';
		result += 'game0:' + GAME0 + ';';
	}



	for(var i=-1; i<get("mpdisparea").childNodes.length; i++){ // -1 for the single player
		if( i==-1 && SINGLEMULTI == 2 && !complete ){continue;}
		if( i>-1 && SINGLEMULTI == 1 && !complete ){break;}
		
		var index;
		if( i==-1 ){
			index = 0;
			result += "player0:";
		}
		else{
			index = idx(get("mpdisparea").childNodes[i]);
			result += "player:";
		}

		result += get("name_"+index).value + ",";
		result += get("color_"+index).value + ",";
		var ctl = get("ctltype_"+index).dataset.selected;
		result += ctl;

		if(ctl == "gp" || complete){
			result += ",";
			result += get("gpidx_" + index).value + ",";
			result += getSelectedCode(get("gprelabs_" + index)) + ",";
			result += getSelectedCode(get("gplr_" + index)) + ",";
			result += getSelectedCode(get("gpud_" + index)) + ",";
			result += getSelectedCode(get("gpthrust_" + index)) + ",";
			result += getSelectedCode(get("gpfire_" + index)) + ",";
			result += getSelectedCode(get("gpspcl_" + index));
		}
		if(ctl == "kb" || complete){
			result += ",";
			result += getSelectedCode(get("kbrelabs_" + index)) + ",";
			result += get("kbl_" + index).dataset.code + ",";
			result += get("kbr_" + index).dataset.code + ",";
			result += get("kbu_" + index).dataset.code + ",";
			result += get("kbd_" + index).dataset.code + ",";
			result += get("kbthrust_" + index).dataset.code + ",";
			result += get("kbfire_" + index).dataset.code + ",";
			result += get("kbspcl_" + index).dataset.code;
		}
		if(ctl == "ms" || complete){
			result += ",";
			result += getSelectedCode(get("msrelabs_" + index)) + ",";
			result += getSelectedCode(get("msthrustfire_" + index)) + ",";
			result += getSelectedCode(get("msspcl_" + index));
		}
		result += ";";
	}


	return result;
}

function string2config(string, warning){ // string must be complete

	get("spdisparea").innerHTML = '';
	addPlayer(false); // add random single player
	get("mpdisparea").innerHTML = '';

	if(string.split(';')[0] != 'hbcfgv:' + CFGVERSION){
		if(warning){alert("Data does not store AceChase configuration or version is incompatible!");}
		console.log("Data: " + string);
		return;
	}

	var cfg = string.split(';');

	for(var i=cfg.length-1; i>=0; i--){ // back to front cuz players are added on top
		var key = cfg[i].split(':')[0];
		var value = cfg[i].split(':')[1];

		if(key=="time" || key=="hp" || key=="shld" || key=="shldreg" || key=="ammo" || key=="ammoreg"
				|| key=="vol" || key=="debug" || key=="map"){
			get(key).value = value;
		}

		if(key=="bump" || key=="h2o"){
			get(key).checked = value=="1";
		}

		if(key == "player" || key == "player0"){
			var ip = 0; // index of part
			var part = value.split(',');
			var index = 0;
			if(key == "player"){index = addPlayer(true)};
			get("name_"+index).value = part[ip];
			selectItem(get("color_"+index), part[++ip]);
			get("color_"+index).onchange();
			ctlSelect(index, part[++ip]);

			selectItem(get("gpidx_" + index), part[++ip]);
			selectItem(get("gprelabs_" + index), part[++ip]);
			selectItem(get("gplr_" + index), part[++ip]);
			selectItem(get("gpud_" + index), part[++ip]);
			selectItem(get("gpthrust_" + index), part[++ip]);
			selectItem(get("gpfire_" + index), part[++ip]);
			selectItem(get("gpspcl_" + index), part[++ip]);

			selectItem(get("kbrelabs_" + index), part[++ip]);
			get("kbl_" + index).dataset.code = part[++ip];
			get("kbl_" + index).innerHTML = keyNames[part[ip]] || "k" + part[ip];
			get("kbr_" + index).dataset.code = part[++ip];
			get("kbr_" + index).innerHTML = keyNames[part[ip]] || "k" + part[ip];
			get("kbu_" + index).dataset.code = part[++ip];
			get("kbu_" + index).innerHTML = keyNames[part[ip]] || "k" + part[ip];
			get("kbd_" + index).dataset.code = part[++ip];
			get("kbd_" + index).innerHTML = keyNames[part[ip]] || "k" + part[ip];
			get("kbthrust_" + index).dataset.code = part[++ip];
			get("kbthrust_" + index).innerHTML = keyNames[part[ip]] || "k" + part[ip];
			get("kbfire_" + index).dataset.code = part[++ip];
			get("kbfire_" + index).innerHTML = keyNames[part[ip]] || "k" + part[ip];
			get("kbspcl_" + index).dataset.code = part[++ip];
			get("kbspcl_" + index).innerHTML = keyNames[part[ip]] || "k" + part[ip];

			selectItem(get("msrelabs_" + index), part[++ip]);
			selectItem(get("msthrustfire_" + index), part[++ip]);
			selectItem(get("msspcl_" + index), part[++ip]);
		}
	}

}

//////////////////////////
// strings for dropdown //
//////////////////////////

//http://htmlcolorcodes.com/color-names/
var colors = ["white", "snow", "honeydew", "mintcream", "azure", "aliceblue", "ghostwhite", "whitesmoke", "seashell", "beige", "oldlace", "floralwhite", "ivory", "antiquewhite", "linen", "lavenderblush", "mistyrose", "gold", "yellow", "lightyellow", "lemonchiffon", "lightgoldenrodyellow", "papayawhip", "moccasin", "peachpuff", "palegoldenrod", "khaki", "darkkhaki", "lightsalmon", "coral", "tomato", "orangered", "darkorange", "orange", "indianred", "lightcoral", "salmon", "darksalmon", "lightsalmon", "crimson", "red", "firebrick", "darkred", "pink", "lightpink", "hotpink", "deeppink", "mediumvioletred", "palevioletred", "lavender", "thistle", "plum", "violet", "orchid", "fuchsia", "magenta", "mediumorchid", "mediumpurple", "rebeccapurple", "blueviolet", "darkviolet", "darkorchid", "darkmagenta", "purple", "indigo", "slateblue", "darkslateblue", "mediumslateblue", "aqua", "cyan", "lightcyan", "paleturquoise", "aquamarine", "turquoise", "mediumturquoise", "darkturquoise", "cadetblue", "steelblue", "lightsteelblue", "powderblue", "lightblue", "skyblue", "lightskyblue", "deepskyblue", "dodgerblue", "cornflowerblue", "mediumslateblue", "royalblue", "blue", "mediumblue", "darkblue", "navy", "midnightblue", "greenyellow", "chartreuse", "lawngreen", "lime", "limegreen", "palegreen", "lightgreen", "mediumspringgreen", "springgreen", "mediumseagreen", "seagreen", "forestgreen", "green", "darkgreen", "yellowgreen", "olivedrab", "olive", "darkolivegreen", "mediumaquamarine", "darkseagreen", "lightseagreen", "darkcyan", "teal", "cornsilk", "blanchedalmond", "bisque", "navajowhite", "wheat", "burlywood", "tan", "rosybrown", "sandybrown", "goldenrod", "darkgoldenrod", "peru", "chocolate", "saddlebrown", "sienna", "brown", "maroon", "gainsboro", "lightgray", "silver", "darkgray", "gray", "dimgray", "lightslategray", "slategray", "darkslategray", "black"];

//http://skinnyms.com/50-super-foods-the-ultimate-shopping-list/
//http://bembu.com/healthy-spices-and-herbs
//https://en.wikipedia.org/wiki/List_of_micronutrients
//http://www.sixwise.com/newsletters/05/07/27/the-15-healthiest-berries-you-could-possibly-eat--including-7-most-havent-heard-of.htm
//http://www.livestrong.com/slideshow/1009507-9-healthiest-nuts-that-may-live-longer/
var names = ["Almond", "Apple", "Apricot", "Artichoke", "Asparagus", "Avocado", "Banana", "Bean", "Lentil", "Beet", "BellPepper", "Broccoli", "B-Sprout", "Cabbage", "Cantaloupe", "Carrot", "Cauliflower", "Cherry", "Chia", "Coconut", "DarkChocolate", "Flax", "Garlic", "Grape", "HotPepper", "Kale", "Kiwi", "Lemon", "Lime", "Mango", "Mushroom", "Oat", "Olive", "Orange", "Papaya", "Peach", "Pineapple", "Pumpkin", "Pomegranate", "Quinoa", "Spinach", "Spirulina", "Sprout", "SweetPotato", "SwissChard", "Tomato", "Walnut", "Turmeric", "Rosemary", "Basil", "Cumin", "Nutmeg", "Saffron", "Ginseng", "Cardamom", "Curry", "Thyme", "Cay-N-Pepper", "LicoriceRoot", "Oregano", "Cilantro", "Lavender", "Sage", "Ginger", "Cinnamon", "Parsley", "Fennel", "Boron", "Calcium", "Cobalt", "Chloride", "Chromium", "Copper", "Fluoride", "Iodine", "Iron", "Lithium", "Magnesium", "Manganese", "Molybdenum", "Phosphorus", "Potassium", "Selenium", "Sodium", "Sulfur", "Zinc", "Thiamin", "Riboflavin", "Niacin", "PantothenicAcid", "Pyridoxine", "Pyridoxal", "Pyridoxamine", "Biotin", "ErgadenylicAcid", "FolicAcid", "Cyanocobalamin", "Choline", "Retinol", "AscorbicAcid", "VitaminD", "Tocopherol", "VitaminK", "AlphaCarotene", "BetaCarotene", "Cryptoxanthin", "Lutein", "Lycopene", "Zeaxanthin", "Blueberry", "Strawberry", "Bilberry", "Blackberry", "Elderberry", "GojiBerry", "Lingonberry", "Cranberry", "Raspberry", "Dewberry", "Mulberry", "Gooseberry", "Huckleberry", "Chokeberry", "Pecan", "Pistachio", "Hazelnut", "Cashew", "Macadamia", "BrazilNut", "Peanut"];
names = names.sort();

var axespm = ["-/+ Axis 0", "+/- Axis 0", "-/+ Axis 1", "+/- Axis 1", "-/+ Axis 2", "+/- Axis 2", "-/+ Axis 3", "+/- Axis 3", "-/+ Axis 4", "+/- Axis 4", "-/+ Axis 5", "+/- Axis 5"];
var axeshalf = ["- Axis 0", "+ Axis 0", "- Axis 1", "+ Axis 1", "- Axis 2", "+ Axis 2", "- Axis 3", "+ Axis 3", "- Axis 4", "+ Axis 4", "- Axis 5", "+ Axis 5"];
var axcode = ["a+0", "a-0", "a+1", "a-1", "a+2", "a-2", "a+3", "a-3", "a+4", "a-4", "a+5", "a-5"]
var buttons = [];
var butcode = [];
for(var i=0; i<20; i++){buttons.push("Button "+i);}
for(var i=0; i<10; i++){butcode.push("b0"+i);}
for(var i=10; i<20; i++){butcode.push("b"+i);}

//https://github.com/wesbos/keycodes
var keyNames={3:"break", 8:"backspace", 9:"tab", 12:'clear',13:"enter", 16:"shift", 17:"ctrl", 18:"alt", 19:"pause", 20:"caps", 27:"esc", 32:"space", 33:"pgup", 34:"pgdn", 35:"end", 36:"home", 37:"left", 38:"up", 39:"right", 40:"down", 41:"select", 42:"print", 43:"exec", 44:"Print", 45:"insert", 46:"delete", 48:"0", 49:"1", 50:"2", 51:"3", 52:"4", 53:"5", 54:"6", 55:"7", 56:"8", 57:"9", 58:":", 59:";/=", 60:"<", 61:"=", 63:"ß", 64:"@", 65:"a", 66:"b", 67:"c", 68:"d", 69:"e", 70:"f", 71:"g", 72:"h", 73:"i", 74:"j", 75:"k", 76:"l", 77:"m", 78:"n", 79:"o", 80:"p", 81:"q", 82:"r", 83:"s", 84:"t", 85:"u", 86:"v", 87:"w", 88:"x", 89:"y", 90:"z", 96:"num0", 97:"num1", 98:"num2", 99:"num3", 100:"num4", 101:"num5", 102:"num6", 103:"num7", 104:"num8", 105:"num9", 106:"numx", 107:"num+", 108:"num.", 109:"num-", 110:"num,", 111:"num:", 112:"f1", 113:"f2", 114:"f3", 115:"f4", 116:"f5", 117:"f6", 118:"f7", 119:"f8", 120:"f9", 121:"f10", 122:"f11", 123:"f12", 124:"f13", 125:"f14", 126:"f15", 127:"f16", 128:"f17", 129:"f18", 130:"f19", 131:"f20", 132:"f21", 133:"f22", 134:"f23", 135:"f24", 144:"numlock", 145:"scrolllock", 160:"^", 161:'!',163:"#", 164:'$',165:'ù',170:'*',171:"~+*key", 186:";/ñ", 187:"=", 188:",", 189:"-", 190:".", 191:"//ç", 192:"`/ñ/æ", 193:"?,/°", 194:"num.", 219:"(", 220:"\\", 221:")", 222:"'/ø", 223:"`", 225:"altgr", 226:"</>", 231:"ç"};

</script>

<!--///////////->
// actual page //
<-////////////-->

<center>

<div id="cookieinfo" class="std" style="background-color:white; padding:5px">This site uses cookies to store information on your computer (duh!). We only use them so that your carefully hand-crafted configuration is not lost. Pinky swear. <button onclick="get('cookieinfo').style.display = 'none'">I don't care.</button></div><br>

<img src="media/images/darken.png" style="display:none"><!-- preloading images -->
<img src="media/images/lighten.png" style="display:none">
<img src="media/images/gamepad.png" style="display:none">
<img src="media/images/keyboard.png" style="display:none">
<img src="media/images/mouse.png" style="display:none">
<img src="media/images/mobile.png" style="display:none">

<table id="spmptable" class="std" style="padding:7px; background-color:white; border-color:#cccccc; width:540px">
<tr><td style="text-align:center">
<img id="sp" src="media/images/singleplayer.png" title="singleplayer" onclick="spmpSelect('sp')" class="std" style="background-color:#f0f8ff; width:200px">
</td><td style="text-align:center">
<img id="mp" src="media/images/multiplayer.png" title="multiplayer" onclick="spmpSelect('mp')" class="std" style="background-color:#f0f8ff; width:200px">
</td></tr>
</table>
<br>


<div id="singleplayercfg" style = "display:none">
	<div id="spdisparea"></div>



<table class="campaign" onclick="MAP0='maps/cactus.svg'; GAME0='T'; startgame()">
 <tr>
  <td align="center" style = "width:100px">
	<img src="maps/cactus.jpg" title="Cactus" class="std" style="width:100px">
  </td>
  <td style = "width:200px">
<b>Cactus</b><br>
Hustle through the cactus (preferably without touching the walls) and beat your own time because we didn't implement a high score server!
  </td>
  <td align="center" style = "width:100px">
	<img id="cactusmedal" style="width:100px; display:none"><br>
	<div id="cactushs"></div>
	<script>
		if(true){ // so vars are not global
			var hs = getCookie("maps/cactus.svg");
			if(hs != ""){
				var award = medal("maps/cactus.svg", hs*1);
				if(award != null){
					get("cactusmedal").src = "media/images/" + award + ".png";
					get("cactusmedal").style.display = "inline";
				}
				get("cactushs").innerHTML = Math.floor(hs/60) + ":" + pad(Math.floor(hs%60),2) + "." + pad(Math.round(1000*(hs%1)),3);
			}
		}
	</script>
  </td>
 </tr>
</table>



<table class="campaign" onclick="MAP0='maps/hilbertsgarden.svg'; GAME0='T'; startgame()">
 <tr>
  <td align="center" style = "width:100px">
	<img src="maps/hilbertsgarden.jpg" title="Hilbert's Garden" class="std" style="width:100px">
  </td>
  <td style = "width:200px">
<b>Hilbert's Garden</b><br>
Speedrun the second order Hilbert curve! It's even more meaner!
  </td>
  <td align="center" style = "width:100px">
	<img id="hilbertsgardenmedal" style="width:100px; display:none"><br>
	<div id="hilbertsgardenhs"></div>
	<script>
		if(true){ // so vars are not global
			var hs = getCookie("maps/hilbertsgarden.svg");
			if(hs != ""){
				var award = medal("maps/hilbertsgarden.svg", hs*1);
				if(award != null){
					get("hilbertsgardenmedal").src = "media/images/" + award + ".png";
					get("hilbertsgardenmedal").style.display = "inline";
				}
				get("hilbertsgardenhs").innerHTML = Math.floor(hs/60) + ":" + pad(Math.floor(hs%60),2) + "." + pad(Math.round(1000*(hs%1)),3);
			}
		}
	</script>
  </td>
 </tr>
</table>



<table class="campaign" onclick="MAP0='maps/shootingrange1.svg'; GAME0='X1'; startgame()">
 <tr>
  <td align="center" style = "width:100px">
	<img src="maps/shootingrange1.png" title="Shooting Range I" class="std" style="width:100px">
  </td>
  <td style = "width:200px">
<b>Shooting Range I</b><br>
Shoot as many targets as you can! Avoid shooting or touching the magnet mine though.
  </td>
  <td align="center" style = "width:100px">
	<img id="shootingrange1medal" style="width:100px; display:none"><br>
	<div id="shootingrange1hs"></div>
	<script>
		if(true){ // so vars are not global
			var hs = getCookie("maps/shootingrange1.svg");
			if(hs != ""){
				var award = medal("maps/shootingrange1.svg", hs*1);
				if(award != null){
					get("shootingrange1medal").src = "media/images/" + award + ".png";
					get("shootingrange1medal").style.display = "inline";
				}
				get("shootingrange1hs").innerHTML = hs;
			}
		}
	</script>
  </td>
 </tr>
</table>



<table class="campaign" onclick="MAP0='maps/shootingrange2.svg'; GAME0='X2'; startgame()">
 <tr>
  <td align="center" style = "width:100px">
	<img src="maps/shootingrange2.png" title="Shooting Range II" class="std" style="width:100px">
  </td>
  <td style = "width:200px">
<b>Shooting Range II</b><br>
Same procedure as last Shooting Range, just difficulter.
  </td>
  <td align="center" style = "width:100px">
	<img id="shootingrange2medal" style="width:100px; display:none"><br>
	<div id="shootingrange2hs"></div>
	<script>
		if(true){ // so vars are not global
			var hs = getCookie("maps/shootingrange2.svg");
			if(hs != ""){
				var award = medal("maps/shootingrange2.svg", hs*1);
				if(award != null){
					get("shootingrange2medal").src = "media/images/" + award + ".png";
					get("shootingrange2medal").style.display = "inline";
				}
				get("shootingrange2hs").innerHTML = hs;
			}
		}
	</script>
  </td>
 </tr>
</table>



<br><br>
	<div id="spoptions" class="std" style="background-color:white; padding:5px; width:300px">
		<table>
		<tr class="optionline"><td>Music Vol.:</td><td><input id="vol0" type="range"  min="0" max="100" value="40"/></td></tr>
		<tr class="optionline"><td>Fancy Terrain:</td><td><input id="bump0" type="checkbox" checked="true"></td></tr>
		<tr class="optionline"><td>Fancy Water:</td><td><input id="h2o0" type="checkbox" checked="true"></td></tr>
		<tr class="optionline"><td>Debug Level:</td><td><input id="debug0" type="number" value=0 class="std" style="width:50px"></td></tr>
		</table>
	</div>
</div>

<div id="multiplayercfg" style="display:none">
	<img src="media/images/addplr.png" title="add player" onclick="addPlayer(true)" class="std" style="background-color:#77ff99; width:80px">
	<img src="media/images/settings.png" title="settings" onclick="flipOptions()" class="std" style="background-color:#3355ff; width:80px">
	<img src="media/images/start.png" title="start game"
		onclick="startgame()" class="std" style="background-color:#ff7755; width:80px"><br>

	<div id="mpoptions" class="std" style="background-color:white; padding:5px; width:530px; display:none">
	<br>
	<table>
	<tr class="optionline"><td>Round Time:</td><td><input id="time" type="number" value=120 class="std" style="width:50px"> s</td></tr>
	<tr class="optionline"><td>Hitpoints:</td><td><input id="hp" type="number" value=10 class="std" style="width:50px"></td></tr>
	<tr class="optionline"><td>Shield:</td><td><input id="shld" type="number" value=6 class="std" style="width:50px"> hits</td></tr>
	<tr class="optionline"><td>Shield Regen.:</td><td><input id="shldreg" type="number" value=1 class="std" style="width:50px"> hits/s</td></tr>
	<tr class="optionline"><td>Phaser Ammo:</td><td><input id="ammo" type="number" value=30 class="std" style="width:50px"> shots</td></tr>
	<tr class="optionline"><td>Phaser Regen.:</td><td><input id="ammoreg" type="number" value=10 class="std" style="width:50px"> shots/s</td></tr>
	<tr class="optionline"><td>Music Vol.:</td><td><input id="vol" type="range"  min="0" max="100" value="40"/></td></tr>
	<tr class="optionline"><td>Fancy Terrain:</td><td><input id="bump" type="checkbox" checked="true"></td></tr>
	<tr class="optionline"><td>Fancy Water:</td><td><input id="h2o" type="checkbox" checked="true"></td></tr>
	<tr class="optionline"><td>Debug Level:</td><td><input id="debug" type="number" value=0 class="std" style="width:50px"></td></tr>
	</table>
	<br>
	<button id="restore" class="std" style="background-color:#ff9977" onclick="defaultOptions()">Restore Default</button>
	<br>&nbsp;
	</div>

	<div class="std" style="background-color:white; display:block; width:540px">
	<!--MapURL: <input id="map" type="text" list="arenanames" class="std" style="width:300px" value="maps/hackerland.svg">
	<datalist id="arenanames">
		<option>maps/grassiceislands.svg</option>
		<option>maps/hackerland.svg</option>
		<option>maps/honeycombs.svg</option>
	</datalist>-->
	<table height=35><tr><td>Map:</td><td width=300 style="position:relative">
			<select id="map" class="std" style="position:absolute; top:0px; left:0px; width:300px">
				<option value="maps/grassiceislands.svg">Grass Ice Islands</option>
				<option value="maps/hackerland.svg">Hackerland</option>
				<option value="maps/honeycombs.svg">Honeycombs</option>
				<!--<option value="custom">Custom URL...</option>-->
  			</select>
			<!--<input type="text" id="custommap" class="std" style="position:absolute; top:0px; left:0px; width:250px"> -->
	</td></tr></table>


	</div>

	<div id="mpdisparea"></div>
</div>

<br>
<table width=540><tr>
	<td align="center" width=33%>
		<a href="https://www.patreon.com/aceholecousins"><table width=150 class="std"><tr>
			<td><img src="media/images/patreon.png" title="patreon" width=32 height=32></td>
			<td>&nbsp;<b>Support</b></td>
		</tr></table></a>
	</td>
	<td align="center" width=33%>
		<a href="https://www.facebook.com/AceholeCousins/"><table class="std" width=150><tr>
			<td><img src="media/images/facebook.png" title="facebook" width=32 height=32></td>
			<td>&nbsp;<b>Follow</b></td>
		</tr></table></a>
	</td>
	<td align="center" width=33%>
		<a href="https://github.com/aceholecousins/acechase"><table class="std" width=150><tr>
			<td><img src="media/images/github.png" title="github" width=32 height=32></td>
			<td>&nbsp;<b>Contribute</b></td>
		</tr></table></a>
	</td>
</tr></table>

</center>

<!--Trouble with key-presses getting ignored? Read <a href="https://www.microsoft.com/appliedsciences/antighostingexplained.mspx">this</a>!<br>
You can connect multiple keyboards to avoid this<br>
(but each player needs different keys).<br>
There are also apps for using smartphones as controllers.<br>
Just saying.
Note that some mice sneakily register as USB controllers.-->

<script>
string2config(getCookie('hbcfg'), false);
</script>



</body></html>
